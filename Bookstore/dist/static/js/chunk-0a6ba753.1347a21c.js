(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a6ba753"],{1148:function(e,t,o){"use strict";var r=o("a691"),i=o("1d80");e.exports=function(e){var t=String(i(this)),o="",a=r(e);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(o+=t);return o}},"408a":function(e,t,o){var r=o("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},"634a":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"order"}},[o("div",{staticClass:"help-main"},[e._m(0),e._l(e.books,(function(t){return o("div",{key:t.book_id,staticClass:"pro"},[o("div",{staticClass:"product-attr"},[o("div",{staticClass:"product-name fl"},[o("div",{staticClass:"pic-thumb fl"},[o("img",{staticClass:"middle",attrs:{src:t.book_image},on:{click:function(o){return e.toDetails(t)}}})]),o("div",{staticClass:"product-title fl"},[o("a",{staticClass:"ellipsis",on:{click:function(o){return e.toDetails(t)}}},[e._v(e._s(t.book_name))]),o("br")])]),o("div",{staticClass:"product-price fr"},[o("ul",{staticClass:"clearfix"},[o("li",[e._v(e._s(e._f("showPrice")(parseFloat(t.book_price))))]),o("li",[e._v(e._s(t.book_count))])])])])])})),o("div",{staticClass:"order-form"},[o("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"收件人",prop:"contact_name",size:"small"}},[o("el-input",{model:{value:e.ruleForm.contact_name,callback:function(t){e.$set(e.ruleForm,"contact_name",t)},expression:"ruleForm.contact_name"}})],1),o("el-form-item",{attrs:{label:"电话",prop:"contact_phone",size:"small"}},[o("el-input",{model:{value:e.ruleForm.contact_phone,callback:function(t){e.$set(e.ruleForm,"contact_phone",t)},expression:"ruleForm.contact_phone"}})],1)],1),o("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[o("el-form-item",{staticStyle:{width:"80%",margin:"10px auto"},attrs:{label:"收货地址",prop:"address"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1),o("el-form-item",{staticStyle:{width:"80%",margin:"25px auto"},attrs:{label:"备注",prop:"memo"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.memo,callback:function(t){e.$set(e.ruleForm,"memo",t)},expression:"ruleForm.memo"}})],1),o("span",{staticClass:"order-info"},[e._v("总计："+e._s(e.totalPrice))]),o("el-form-item",[o("el-button",{attrs:{type:"info",plain:""},on:{click:e.cancelOrder}},[e._v("取消订单")]),o("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交订单")])],1)],1)],1)],2)])},i=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"product-item clearfix"},[o("div",{staticClass:"name fl"},[o("span",{staticStyle:{"margin-left":"150px"}},[e._v("商品")])]),o("div",{staticClass:"attr fr"},[o("ul",{staticClass:"clearfix"},[o("li",[e._v("价格")]),o("li",[e._v("数量")])])])])}],a=(o("b680"),o("1bab")),s={name:"Order",data:function(){return{books:[{book_id:"1",book_name:"csapp",book_author:"Author",book_price:39,book_count:2,book_img:""},{book_id:"2",book_name:"csapp",book_author:"Author",book_price:39,book_count:2,book_img:""}],totalPrice:this.getTotal(),comefrom:"",ruleForm:{memo:"",address:"",contact_name:"",contact_phone:""},rules:{contact_name:[{required:!0,message:"请输入收件人姓名",trigger:"blur"}],contact_phone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],address:[{required:!0,message:"请输入收货地址",trigger:"blur"}]}}},created:function(){console.log(JSON.parse(this.$route.query.orderlist)),this.books=JSON.parse(this.$route.query.orderlist),this.comefrom=this.$route.query.comefrom,this.totalPrice=this.getTotal()},filters:{showPrice:function(e){return e?"￥"+e.toFixed(2):""}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.submitOrder()}))},submitOrder:function(){var e=this,t=new FormData,o="";if("cart"===this.comefrom){var r=[];for(var i in this.books)r.push(this.books[i].book_id);console.log(r),t.append("book_list",JSON.stringify(r)),o="/api/trade/creat_new_order/"}else"details"===this.comefrom&&(t.append("book_id",this.books[0].book_id),t.append("book_count",this.books[0].book_count),o="/api/trade/new_order_single_book/");t.append("memo",this.ruleForm.memo),t.append("address",this.ruleForm.address),t.append("contact_name",this.ruleForm.contact_name),t.append("contact_phone",this.ruleForm.contact_phone),Object(a["a"])({method:"post",url:o,data:t}).then((function(t){console.log(t),t.error_num?e.$message({type:"error",message:"订单提交失败"+t.message}):(e.$message({type:"success",message:"订单提交成功"}),e.$router.push("/"))})).catch((function(t){console.log(t),e.$message({type:"error",message:"订单提交失败"})}))},cancelOrder:function(){this.$router.go(-1)},getTotal:function(){var e=0;for(var t in this.books)e+=this.books[t].book_count*this.books[t].book_price;return e}}},n=s,l=(o("9a2b"),o("2877")),c=Object(l["a"])(n,r,i,!1,null,null,null);t["default"]=c.exports},"7c28":function(e,t,o){},"9a2b":function(e,t,o){"use strict";o("7c28")},b680:function(e,t,o){"use strict";var r=o("23e7"),i=o("a691"),a=o("408a"),s=o("1148"),n=o("d039"),l=1..toFixed,c=Math.floor,u=function(e,t,o){return 0===t?o:t%2===1?u(e,t-1,o*e):u(e*e,t/2,o)},m=function(e){var t=0,o=e;while(o>=4096)t+=12,o/=4096;while(o>=2)t+=1,o/=2;return t},d=function(e,t,o){var r=-1,i=o;while(++r<6)i+=t*e[r],e[r]=i%1e7,i=c(i/1e7)},p=function(e,t){var o=6,r=0;while(--o>=0)r+=e[o],e[o]=c(r/t),r=r%t*1e7},f=function(e){var t=6,o="";while(--t>=0)if(""!==o||0===t||0!==e[t]){var r=String(e[t]);o=""===o?r:o+s.call("0",7-r.length)+r}return o},b=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n((function(){l.call({})}));r({target:"Number",proto:!0,forced:b},{toFixed:function(e){var t,o,r,n,l=a(this),c=i(e),b=[0,0,0,0,0,0],h="",_="0";if(c<0||c>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(h="-",l=-l),l>1e-21)if(t=m(l*u(2,69,1))-69,o=t<0?l*u(2,-t,1):l/u(2,t,1),o*=4503599627370496,t=52-t,t>0){d(b,0,o),r=c;while(r>=7)d(b,1e7,0),r-=7;d(b,u(10,r,1),0),r=t-1;while(r>=23)p(b,1<<23),r-=23;p(b,1<<r),d(b,1,1),p(b,2),_=f(b)}else d(b,0,o),d(b,1<<-t,0),_=f(b)+s.call("0",c);return c>0?(n=_.length,_=h+(n<=c?"0."+s.call("0",c-n)+_:_.slice(0,n-c)+"."+_.slice(n-c))):_=h+_,_}})}}]);
//# sourceMappingURL=chunk-0a6ba753.1347a21c.js.map